# OAuth2 Proxy - Dev environment

replicaCount: 1

config:
  # Use existing secret managed by External Secrets
  existingSecret: oauth2-proxy-credentials
  configFile: |-
    email_domains = [ "*" ]
    upstreams = [ "file:///dev/null" ]
    cookie_secure = true
    cookie_httponly = true
    pass_access_token = true
    set_xauthrequest = true
    set_authorization_header = true

# PLACEHOLDER: Replace with your OIDC provider
extraArgs:
  provider: oidc
  oidc-issuer-url: "https://idp.dev.example.com"
  login-url: "https://idp.dev.example.com/authorize"
  redeem-url: "https://idp.dev.example.com/oauth/token"
  validate-url: "https://idp.dev.example.com/userinfo"
  scope: "openid profile email"

resources:
  requests:
    cpu: 50m
    memory: 64Mi
  limits:
    cpu: 200m
    memory: 128Mi

ingress:
  enabled: true
  className: ""
  hosts:
    - auth.dev.example.com
  tls:
    - secretName: oauth2-proxy-tls
      hosts:
        - auth.dev.example.com

service:
  type: ClusterIP
  portNumber: 80
