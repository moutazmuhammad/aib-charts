# Istiod - Preprod environment
# Mirror production with slightly reduced resources

replicaCount: 2
autoscaleEnabled: true
autoscaleMin: 2
autoscaleMax: 4

resources:
  requests:
    cpu: 500m
    memory: 2048Mi
  limits:
    cpu: 2000m
    memory: 4096Mi

global:
  istioNamespace: service-mesh
  hub: docker.io/istio
  tag: 1.29.0
  defaultPodDisruptionBudget:
    enabled: true
  proxy:
    resources:
      requests:
        cpu: 100m
        memory: 128Mi
      limits:
        cpu: 1000m
        memory: 512Mi
  logging:
    level: "default:info"

meshConfig:
  enablePrometheusMerge: true
  accessLogFile: /dev/stdout
  defaultConfig:
    holdApplicationUntilProxyStarts: true

telemetry:
  enabled: true
  v2:
    enabled: true
    prometheus:
      enabled: true

pilot:
  traceSampling: 10.0

pdb:
  minAvailable: 1
