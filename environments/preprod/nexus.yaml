# Nexus Repository Manager - Preprod environment

image:
  repository: sonatype/nexus3
  tag: 3.64.0
  pullPolicy: IfNotPresent

deploymentStrategy: Recreate

nexus:
  env:
    - name: INSTALL4J_ADD_VM_PARAMS
      value: |-
        -Xms2703M -Xmx2703M
        -XX:MaxDirectMemorySize=2703M
        -XX:+UnlockExperimentalVMOptions
        -Djava.util.prefs.userRoot=/nexus-data/javaprefs
    - name: NEXUS_SECURITY_RANDOMPASSWORD
      value: "true"
  resources:
    requests:
      cpu: 1
      memory: 4Gi
    limits:
      cpu: 4
      memory: 8Gi

persistence:
  enabled: true
  accessMode: ReadWriteOnce
  storageSize: 100Gi

ingress:
  enabled: true
  ingressClassName: ""
  annotations:
    ingress.kubernetes.io/proxy-body-size: "0"
  hostPath: /
  hostRepo: nexus.preprod.example.com
  tls:
    - secretName: nexus-tls
      hosts:
        - nexus.preprod.example.com

service:
  enabled: true
  type: ClusterIP
